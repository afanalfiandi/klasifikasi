<div
  class="h-screen w-screen overflow-hidden flex flex-col space-y-2 justify-center items-center space-x-20"
>
  <div class="text-center">
    <p class="text-3xl mb-2 text-blue-500 font-bold">Riwayat</p>

    <p *ngIf="records.length">
      Data dibawah ini merupakan riwayat pencarian rekomendasi calon murid yang
      telah dilakukan
    </p>
    <p *ngIf="!records.length">
      Data riwayat belum tersedia. Silakan lakukan rekomendasi jurusan terlebih
      dahulu.
    </p>
  </div>
  <ng-container *ngIf="records.length">
    <div
      *ngIf="authData?.id_role == '1'"
      class="flex justify-between items-end space-x-2 text-white"
    >
      <button
        type="button"
        class="bg-green-500 p-2 hover:bg-green-700 rounded-md"
        (click)="onExport()"
      >
        {{ isLoading ? "Loading..." : "Export" }}
      </button>
      <button
        type="button"
        class="bg-red-700 p-2 hover:bg-red-800 rounded-md"
        (click)="onDeletAll()"
      >
        {{ isLoading ? "Loading..." : "Hapus Semua Data" }}
      </button>
    </div>
  </ng-container>

  <div class="w-[65%] p-2 space-y-4 max-h-[65%] overflow-y-auto">
    <div class="flex flex-col">
      <div class="-m-1.5 overflow-x-auto">
        <div class="p-1.5 min-w-full inline-block align-middle">
          <div class="overflow-hidden">
            <table
              *ngIf="records.length"
              datatable
              [dtOptions]="dtOptions"
              class="min-w-full divide-y divide-gray-200 row-border hover"
            >
              <thead>
                <tr>
                  <th
                    scope="col"
                    class="px-6 py-3 text-start text-xs font-medium text-gray-500 uppercase"
                  >
                    No
                  </th>
                  <th
                    scope="col"
                    class="px-6 py-3 text-start text-xs font-medium text-gray-500 uppercase"
                  >
                    Nama Calon Murid
                  </th>
                  <!-- <th
                    scope="col"
                    class="px-6 py-3 text-start text-xs font-medium text-gray-500 uppercase"
                  >
                    Jurusan Pilihan
                  </th> -->
                  <th
                    scope="col"
                    class="px-6 py-3 text-start text-xs font-medium text-gray-500 uppercase"
                  >
                    Pend. Agama
                  </th>
                  <th
                    scope="col"
                    class="px-6 py-3 text-start text-xs font-medium text-gray-500 uppercase"
                  >
                    Bahasa Indonesia
                  </th>
                  <th
                    scope="col"
                    class="px-6 py-3 text-start text-xs font-medium text-gray-500 uppercase"
                  >
                    Matematika
                  </th>
                  <th
                    scope="col"
                    class="px-6 py-3 text-start text-xs font-medium text-gray-500 uppercase"
                  >
                    Sejarah
                  </th>
                  <th
                    scope="col"
                    class="px-6 py-3 text-start text-xs font-medium text-gray-500 uppercase"
                  >
                    Bahasa Inggris
                  </th>
                  <th
                    scope="col"
                    class="px-6 py-3 text-start text-xs font-medium text-gray-500 uppercase"
                  >
                    Seni Budaya
                  </th>
                  <th
                    scope="col"
                    class="px-6 py-3 text-start text-xs font-medium text-gray-500 uppercase"
                  >
                    Olahraga dan Keterampilan
                  </th>
                  <th
                    scope="col"
                    class="px-6 py-3 text-start text-xs font-medium text-gray-500 uppercase"
                  >
                    Fisika
                  </th>
                  <th
                    scope="col"
                    class="px-6 py-3 text-start text-xs font-medium text-gray-500 uppercase"
                  >
                    Bahasa Jawa
                  </th>
                  <th
                    scope="col"
                    class="px-6 py-3 text-start text-xs font-medium text-gray-500 uppercase"
                  >
                    Prediksi
                  </th>
                  <!--                   <th
                    scope="col"
                    class="px-6 py-3 text-start text-xs font-medium text-gray-500 uppercase"
                  >
                    Akurasi
                  </th> -->
                  <th
                    *ngIf="authData?.id_role == '1'"
                    scope="col"
                    class="px-6 py-3 text-start text-xs font-medium text-gray-500 uppercase"
                  >
                    Aksi
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let record of records; let i = index">
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800">
                    {{ i + 1 }}
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800">
                    {{ record.nama }}
                  </td>
                  <!-- <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800">
                    {{ record.jurusan_pilihan }}
                  </td> -->
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800">
                    {{ record.pai }}
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800">
                    {{ record.bi }}
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800">
                    {{ record.mtk }}
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800">
                    {{ record.sej }}
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800">
                    {{ record.bing }}
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800">
                    {{ record.senbud }}
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800">
                    {{ record.ok }}
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800">
                    {{ record.fis }}
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800">
                    {{ record.jw }}
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800">
                    {{ record.jurusan_rekomendasi }}
                  </td>
                  <!--                   <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800">
                    {{ convertToPercentage(record.akurasi) }}
                  </td> -->
                  <td
                    *ngIf="authData?.id_role == '1'"
                    class="px-6 py-4 whitespace-nowrap text-sm text-gray-800"
                  >
                    <button
                      type="button"
                      (click)="onDeleteById(record.id_klasifikasi)"
                      class="bg-red-700 p-2 hover:bg-red-800 rounded-md text-white"
                    >
                      <i class="fas fa-trash"></i>
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
